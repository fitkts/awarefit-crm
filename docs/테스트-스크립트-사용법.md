# 🧪 CRM 시스템 테스트 스크립트 사용법

## 📋 개요

CRM 시스템의 각 페이지별로 특화된 테스트 스크립트들과 공통 테스트 도구들의
사용법을 정리한 종합 가이드입니다.

---

## 🗂️ **제공되는 테스트 스크립트**

### 1. 📊 **공통 테스트 스크립트** (`scripts/test-common-features.js`)

- **용도**: 모든 페이지에서 사용 가능한 범용 테스트
- **특징**: 페이지 자동 감지, 기본 환경 검증
- **사용 시기**: 어느 페이지에서든 기본 상태 확인이 필요할 때

### 2. 👥 **회원관리 전용** (`scripts/test-member-features.js`)

- **용도**: 회원관리 페이지 특화 테스트
- **특징**: 회원 CRUD, 검색/필터링, 통계 검증
- **사용 시기**: 회원관리 기능 개발/수정 후

### 3. 👨‍💼 **직원관리 전용** (`scripts/test-staff-features.js`)

- **용도**: 직원관리 페이지 특화 테스트
- **특징**: 직원 관리, 권한, 급여 관련 기능 검증
- **사용 시기**: 직원관리 기능 개발/수정 후

### 4. 💳 **결제관리 전용** (`scripts/test-payment-features.js`)

- **용도**: 결제관리 페이지 특화 테스트
- **특징**: 결제 처리, 환불, 통계, 보안 검증
- **사용 시기**: 결제관리 기능 개발/수정 후

### 5. 📊 **대시보드 전용** (`scripts/test-dashboard-features.js`)

- **용도**: 대시보드 페이지 특화 테스트
- **특징**: 위젯, 차트, 통계, 성능 검증
- **사용 시기**: 대시보드 기능 개발/수정 후

---

## 🚀 **빠른 시작 가이드**

### 기본 사용법 (모든 스크립트 공통)

1. **해당 페이지 열기** (예: 회원관리 페이지)
2. **F12 키** 또는 **우클릭 → 검사** 로 개발자 도구 열기
3. **Console 탭** 선택
4. **allow pasting** 입력 (처음 한 번만)
5. **스크립트 파일 전체 내용 복사**
6. **콘솔에 붙여넣기 후 Enter**

### 30초 빠른 체크

```javascript
// 아무 페이지에서나
commonPageTest.quickCheck();
```

### 페이지별 빠른 체크

```javascript
// 회원관리에서
memberQuickTest.quickCheck();

// 직원관리에서
staffPageTest.quickCheck();

// 결제관리에서
paymentPageTest.quickCheck();

// 대시보드에서
dashboardPageTest.quickCheck();
```

---

## 📖 **페이지별 상세 사용법**

### 🌐 **공통 테스트 스크립트**

#### 전체 테스트 실행

```javascript
// scripts/test-common-features.js 전체 붙여넣기
// 자동으로 현재 페이지를 감지하고 적절한 테스트 실행
```

#### 개별 유틸리티 사용

```javascript
// 현재 페이지 확인
commonPageTest.getCurrentPage(); // 'members', 'staff', 'payments', 'dashboard'

// API 상태 확인
commonPageTest.checkAPIStatus();

// UI 상태 확인
commonPageTest.checkUIStatus();

// 종합 체크
commonPageTest.quickCheck();
```

#### 결과 해석

- **🟢 정상**: API 연결, UI 로딩, 페이지 인식 모두 성공
- **🟡 주의**: 일부 기능에 문제, 사용은 가능
- **🔴 문제**: 기본 기능에 심각한 문제

---

### 👥 **회원관리 페이지 테스트**

#### 전체 테스트

```javascript
// scripts/test-member-features.js 전체 붙여넣기
// 회원 관련 모든 기능을 자동으로 테스트
```

#### 특화 기능 테스트

```javascript
// 회원 데이터 확인
await memberQuickTest.testBasicFeatures();

// 검색 기능 테스트
await memberQuickTest.testMemberSearch('홍길동');

// DOM 요소 확인
memberQuickTest.checkDOM();

// API 상태 확인
memberQuickTest.checkAPI();
```

#### 고급 테스트 (memberTestUtils.ts 로드 시)

```javascript
// 전체 자동 테스트
await memberPageTester.runAllTests();

// 특정 영역만 테스트
await memberPageTester.testSpecificFeature('search'); // 검색
await memberPageTester.testSpecificFeature('crud'); // CRUD
await memberPageTester.testSpecificFeature('ui'); // UI

// 빠른 건강 체크
await memberPageTester.quickHealthCheck();
```

---

### 👨‍💼 **직원관리 페이지 테스트**

#### 전체 테스트

```javascript
// scripts/test-staff-features.js 전체 붙여넣기
```

#### 특화 기능 테스트

```javascript
// 직원 데이터 확인
await staffPageTest.checkStaffData();

// 검색 테스트
await staffPageTest.testStaffSearch('김직원');

// UI 상태 확인
staffPageTest.checkStaffUI();

// 종합 체크
await staffPageTest.quickCheck();
```

#### 체크 포인트

- ✅ 직원 목록 로딩
- ✅ 부서/직책 필터링
- ✅ 권한 관리 UI
- ✅ 급여 관리 기능 (있는 경우)

---

### 💳 **결제관리 페이지 테스트**

#### 전체 테스트

```javascript
// scripts/test-payment-features.js 전체 붙여넣기
```

#### 특화 기능 테스트

```javascript
// 결제 데이터 확인
await paymentPageTest.checkPaymentData();

// 검색 테스트
await paymentPageTest.testPaymentSearch('20240101');

// 날짜별 결제 조회
await paymentPageTest.testDateRangePayments(30); // 최근 30일

// 결제 방법별 분석
await paymentPageTest.analyzePaymentMethods();

// UI 상태 확인
paymentPageTest.checkPaymentUI();

// 종합 체크
await paymentPageTest.quickCheck();
```

#### 중요 체크 포인트

- 🔒 **보안**: 결제 정보 암호화
- 💰 **정확성**: 금액 계산 및 표시
- 📊 **통계**: 매출 분석
- 🔄 **환불**: 환불 프로세스

---

### 📊 **대시보드 페이지 테스트**

#### 전체 테스트

```javascript
// scripts/test-dashboard-features.js 전체 붙여넣기
```

#### 특화 기능 테스트

```javascript
// 전체 통계 확인
await dashboardPageTest.checkAllStats();

// 위젯 상태 확인
dashboardPageTest.checkWidgets();

// 최근 활동 확인
await dashboardPageTest.checkRecentActivity();

// 차트 라이브러리 확인
dashboardPageTest.checkChartLibraries();

// 성능 분석
dashboardPageTest.analyzePerformance();

// 종합 체크
await dashboardPageTest.quickCheck();
```

#### 핵심 요소

- 📊 **위젯**: 6개 이상의 통계 카드
- 📈 **차트**: Canvas/SVG 기반 시각화
- ⚡ **성능**: 1000개 미만의 DOM 노드
- 📱 **반응형**: 모바일 최적화

---

## 🎯 **시나리오별 사용 가이드**

### 🔄 **개발 중 실시간 검증**

```javascript
// 1. 기본 상태 확인 (10초)
commonPageTest.quickCheck();

// 2. 특정 페이지 기능 확인 (30초)
memberQuickTest.quickCheck(); // 회원관리
staffPageTest.quickCheck(); // 직원관리
paymentPageTest.quickCheck(); // 결제관리
dashboardPageTest.quickCheck(); // 대시보드
```

### 🎯 **기능 완성 후 검증**

```javascript
// 해당 페이지의 전체 테스트 스크립트 실행
// 예: scripts/test-member-features.js 전체 복사+실행
```

### 🚀 **배포 전 최종 검증**

1. **모든 페이지에서 공통 테스트 실행**
2. **각 페이지별 전용 테스트 실행**
3. **성공률 90% 이상 확인**
4. **실패한 부분 수동 검증**

### 🐛 **문제 발생 시 진단**

```javascript
// 1. 즉시 상태 파악
commonPageTest.quickCheck();

// 2. API 상세 확인
commonPageTest.checkAPIStatus();

// 3. UI 상세 확인
commonPageTest.checkUIStatus();

// 4. 해당 페이지 특화 진단
// 예: memberQuickTest.quickCheck()
```

---

## 📊 **테스트 결과 해석**

### 성공률별 의미

- **90% 이상**: 🎉 **배포 준비 완료**
- **75-89%**: 👍 **양호**, 일부 개선 권장
- **50-74%**: ⚠️ **주의**, 핵심 기능 점검 필요
- **50% 미만**: 🚨 **심각**, 기본 기능부터 수정

### 카테고리별 우선순위

1. **🔴 API 연결**: 반드시 100%
2. **🔴 데이터 로딩**: 90% 이상 권장
3. **🟡 UI 컴포넌트**: 80% 이상 권장
4. **🟡 고급 기능**: 70% 이상 권장
5. **🟢 부가 기능**: 60% 이상 권장

### 페이지별 핵심 지표

| 페이지   | 핵심 지표                          | 목표 |
| -------- | ---------------------------------- | ---- |
| 회원관리 | API 연결, 테이블 렌더링, 검색 기능 | 90%  |
| 직원관리 | API 연결, 권한 관리, 부서 필터     | 85%  |
| 결제관리 | API 연결, 보안, 금액 정확성        | 95%  |
| 대시보드 | 위젯 로딩, 차트 표시, 성능         | 80%  |

---

## 🔧 **문제 해결 가이드**

### API 관련 문제

```javascript
// 문제 진단
console.log(window.electronAPI); // undefined면 preload 문제
console.log(Object.keys(window.electronAPI.database)); // 사용 가능한 API 확인

// 해결 방법
// 1. 페이지 새로고침
// 2. 앱 재시작
// 3. preload 스크립트 확인
```

### UI 렌더링 문제

```javascript
// 문제 진단
document.readyState; // 'complete'인지 확인
document.querySelectorAll('*').length; // DOM 노드 수

// 해결 방법
// 1. 페이지 로딩 완료 대기
// 2. 네트워크 탭에서 리소스 로딩 확인
// 3. 콘솔에서 JavaScript 오류 확인
```

### 성능 문제

```javascript
// 문제 진단
performance.memory.usedJSHeapSize; // 메모리 사용량
document.querySelectorAll('*').length; // DOM 복잡도

// 해결 방법
// 1. 불필요한 DOM 요소 제거
// 2. 이미지 최적화
// 3. JavaScript 번들 크기 줄이기
```

---

## 🎨 **고급 사용법**

### 커스텀 테스트 작성

```javascript
// 자체 테스트 함수 작성 예시
function myCustomTest() {
  console.log('🧪 커스텀 테스트 시작');

  // 특정 기능 테스트
  const hasFeature = !!document.querySelector('.my-feature');
  console.log(`내 기능: ${hasFeature ? '✅' : '❌'}`);

  return hasFeature;
}

// 실행
myCustomTest();
```

### 자동화된 테스트 플로우

```javascript
// 전체 페이지 순차 테스트 (수동으로 페이지 이동 필요)
async function fullSystemTest() {
  const results = {};

  // 현재 페이지 테스트
  const currentPage = commonPageTest.getCurrentPage();
  results[currentPage] = commonPageTest.quickCheck();

  console.log('다른 페이지로 이동 후 같은 방식으로 테스트하세요');
  return results;
}
```

### 결과 저장 및 비교

```javascript
// 테스트 결과 로컬 저장
function saveTestResults(results) {
  localStorage.setItem(
    'testResults',
    JSON.stringify({
      timestamp: new Date().toISOString(),
      results: results,
    })
  );
  console.log('테스트 결과가 로컬 스토리지에 저장되었습니다');
}

// 이전 결과와 비교
function compareResults() {
  const saved = localStorage.getItem('testResults');
  if (saved) {
    const data = JSON.parse(saved);
    console.log('이전 테스트 결과:', data);
  }
}
```

---

## 📱 **브라우저별 호환성**

### 지원 브라우저

- ✅ **Chrome 90+**: 완전 지원
- ✅ **Edge 90+**: 완전 지원
- ⚠️ **Firefox 88+**: 일부 기능 제한
- ❌ **Safari**: 미테스트 (Electron 환경에서는 무관)

### 브라우저별 차이점

- **Chrome/Edge**: 모든 기능 정상 작동
- **Firefox**: `performance.memory` API 없음
- **Safari**: Electron 앱에서는 해당 없음

---

## 📚 **추가 리소스**

### 관련 문서

- [회원관리 기능 체크리스트](./회원관리-기능-체크리스트.md)
- [회원관리 기능 매트릭스](./회원관리-기능-매트릭스.md)
- [자동화 테스트 가이드](./회원관리-자동화-테스트-가이드.md)

### 도구 활용 팁

1. **북마클릿 만들기**: 자주 사용하는 테스트를 북마크로 저장
2. **단축키 설정**: 개발자 도구 단축키 활용
3. **스니펫 저장**: Chrome DevTools Snippets 활용
4. **자동화 스크립트**: CI/CD 파이프라인에 통합

---

## 🎯 **마무리**

이 테스트 스크립트들을 활용하면:

- ⏰ **시간 절약**: 수동 테스트 시간 80% 단축
- 🎯 **정확성**: 놓치기 쉬운 부분까지 체계적 검증
- 📊 **객관적 평가**: 숫자 기반의 품질 평가
- 🔄 **반복 가능**: 언제든 동일한 방식으로 검증

**💡 핵심은 개발 단계별로 적절한 테스트를 선택하여 효율적으로 활용하는
것입니다!**

### 권장 워크플로우

1. **개발 중**: `quickCheck()` 함수들로 실시간 상태 확인
2. **기능 완성**: 해당 페이지 전용 스크립트로 전체 검증
3. **배포 전**: 모든 페이지에서 공통+전용 테스트 실행
4. **문제 발생**: 진단용 유틸리티로 원인 파악

**이제 체계적이고 효율적인 테스트로 안정적인 CRM 시스템을 구축하세요! 🚀**
