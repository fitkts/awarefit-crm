# 직원관리 시스템 구현 가이드

## 📋 목차
1. [개요](#개요)
2. [단계별 구현 프롬프트](#단계별-구현-프롬프트)
3. [오류 방지 체크리스트](#오류-방지-체크리스트)
4. [문제 해결 가이드](#문제-해결-가이드)

## 개요

이 가이드는 Awarefit CRM 시스템에 직원관리 기능을 안전하고 체계적으로 구현하기 위한 프롬프트 모음입니다.
기존 회원관리 시스템을 참조하여 일관성 있는 구조로 개발할 수 있도록 설계되었습니다.

### 🎯 구현 목표
- 회원관리와 동일한 UX/UI 패턴
- 역할 기반 권한 관리 시스템
- 급여 관리 및 이력 추적
- 회원-직원 연동 기능
- 완전한 CRUD 작업 지원

## 단계별 구현 프롬프트

### 1단계: 분석 및 설계 🔍

```markdown
**프롬프트:**
기존 회원관리 시스템을 분석하여 직원관리 시스템을 설계하고 싶습니다.

다음을 순서대로 진행해주세요:
1. 현재 Member 관련 파일들의 구조와 패턴 분석
2. 직원관리에 필요한 추가 기능 식별 (권한관리, 급여관리 등)
3. 데이터베이스 스키마 설계안 제시
4. 타입 정의 구조 설계안 제시

**주의사항:**
- 기존 코드 패턴을 최대한 유지
- SQLite 호환성 고려
- TypeScript 타입 안전성 확보
- 확장 가능한 구조로 설계

먼저 분석 결과만 보여주시고, 승인 후 다음 단계로 진행하겠습니다.
```

### 2단계: 데이터베이스 스키마 구현 🗃️

```markdown
**프롬프트:**
직원관리를 위한 데이터베이스 스키마를 구현해주세요.

**요구사항:**
- 기존 staff 테이블을 확장 (새 컬럼 추가)
- 역할 관리를 위한 staff_roles 테이블 생성
- 급여 이력을 위한 staff_salary_history 테이블 생성
- 회원-직원 연동을 위한 assigned_staff_id 컬럼 추가

**중요한 제약사항:**
- SQLite에서 지원하지 않는 문법 사용 금지 (IF NOT EXISTS in ALTER TABLE)
- 기존 데이터 보존
- 컬럼 중복 생성 시 에러 처리
- 트랜잭션 안전성 확보

**진행 방식:**
1. 마이그레이션 파일만 먼저 작성
2. 구문 검증 및 테스트
3. 문제없으면 다음 단계 진행

마이그레이션 파일 하나만 작성해주세요.
```

### 3단계: 타입 정의 구현 📝

```markdown
**프롬프트:**
직원관리를 위한 TypeScript 타입 정의를 구현해주세요.

**기본 요구사항:**
- Staff 인터페이스 (기존 Member와 유사한 구조)
- 권한 관리용 StaffRole, StaffPermissions 인터페이스
- 급여 관리용 StaffSalaryHistory, SalaryAdjustmentInput 인터페이스
- 검색/필터/정렬용 인터페이스들

**타입 안전성 규칙:**
- optional(?)과 required 필드 명확히 구분
- union 타입과 undefined 처리 고려
- 기존 Member 타입과 일관성 유지
- import/export 경로 정확히 지정

**진행 방식:**
1. src/types/staff.ts 파일만 작성
2. 기존 타입 파일과의 호환성 확인
3. TypeScript 컴파일 테스트
4. 문제없으면 다음 단계 진행

타입 정의 파일만 먼저 완성해주세요.
```

### 4단계: 백엔드 API 구현 ⚙️

```markdown
**프롬프트:**
직원관리를 위한 IPC 핸들러를 구현해주세요.

**구현 범위:**
- 직원 CRUD 작업 (생성, 조회, 수정, 삭제)
- 직원 검색 및 필터링
- 직원 통계 조회
- 역할 목록 조회
- 급여 조정 및 이력 조회

**기존 패턴 참조:**
- memberHandlers.ts의 구조와 패턴을 정확히 따라 구현
- 동일한 에러 처리 방식 사용
- 페이지네이션 지원
- 트랜잭션 처리

**진행 방식:**
1. src/main/ipc/staffHandlers.ts 파일만 작성
2. main.ts와 preload.ts에 핸들러 등록
3. 기본 API 테스트
4. 문제없으면 다음 단계 진행

백엔드 핸들러만 먼저 구현해주세요.
```

### 5단계: 기본 컴포넌트 구현 🧩

```markdown
**프롬프트:**
직원관리의 기본 컴포넌트를 하나씩 구현해주세요.

**구현 순서 (하나씩):**
1. StaffForm (직원 등록/수정 폼)
2. StaffTable (직원 목록 테이블)
3. StaffStats (직원 통계 대시보드)
4. StaffSearchFilter (검색 및 필터)
5. StaffDetailModal (직원 상세보기)

**각 컴포넌트 요구사항:**
- 기존 Member 컴포넌트와 동일한 UI/UX 패턴
- TypeScript 타입 안전성 확보
- 에러 처리 및 로딩 상태 관리
- 반응형 디자인 적용

**진행 방식:**
첫 번째로 StaffForm 컴포넌트만 구현해주세요.
- 역할 선택 기능 포함
- 급여 입력 필드 포함
- 유효성 검사 로직 포함

컴파일 및 기본 테스트 후 다음 컴포넌트로 진행하겠습니다.
```

### 6단계: 메인 페이지 통합 🏠

```markdown
**프롬프트:**
직원관리 메인 페이지를 구현하고 전체 시스템과 통합해주세요.

**구현 내용:**
- Staff.tsx 메인 페이지 구성
- 모든 컴포넌트 통합 및 상태 관리
- 네비게이션 메뉴 추가
- 라우팅 설정

**통합 요구사항:**
- 기존 Members.tsx와 동일한 구조
- 토스트 알림 시스템 연동
- 에러 경계 처리
- 성능 최적화

**진행 방식:**
1. 페이지 구성 및 컴포넌트 연결
2. 네비게이션 및 라우팅 설정
3. 전체 기능 테스트
4. 회원-직원 연동 기능 구현

단계별로 검증하면서 진행해주세요.
```

### 7단계: 고급 기능 구현 ⚡

```markdown
**프롬프트:**
직원관리의 고급 기능들을 구현해주세요.

**구현 기능:**
1. 급여 관리 모달 (SalaryManagementModal)
2. 회원 등록시 담당직원 선택 기능
3. 직원별 매출 연동 준비
4. 일괄 작업 기능

**각 기능별 요구사항:**
- 급여 조정 시 이력 자동 저장
- 차액 계산 및 퍼센트 표시
- 권한 기반 접근 제어
- 데이터 무결성 보장

**진행 방식:**
한 번에 하나씩 구현하고 테스트해주세요.
먼저 급여 관리 모달부터 구현하겠습니다.
```

## 오류 방지 체크리스트

### ✅ 프롬프트 작성 전 확인사항

- [ ] 단계적 진행 방식으로 작성했는가?
- [ ] 기존 코드 패턴 참조를 명시했는가?
- [ ] SQLite 호환성을 고려했는가?
- [ ] TypeScript 타입 안전성을 강조했는가?
- [ ] 각 단계별 검증 포인트를 포함했는가?

### ✅ 구현 중 확인사항

- [ ] 컴파일 오류가 없는가?
- [ ] 기존 기능에 영향을 주지 않는가?
- [ ] 데이터베이스 스키마가 올바르게 적용되었는가?
- [ ] 타입 정의가 일관성 있게 작성되었는가?
- [ ] 에러 처리가 적절히 구현되었는가?

### ✅ 테스트 확인사항

- [ ] `npm run type-check` 통과
- [ ] `npm run lint` 통과
- [ ] 데이터베이스 마이그레이션 성공
- [ ] 기본 CRUD 작업 동작
- [ ] UI 컴포넌트 정상 렌더링

## 문제 해결 가이드

### 🚨 일반적인 오류와 해결책

#### 1. SQLite 구문 오류
```sql
-- ❌ 잘못된 예
ALTER TABLE staff ADD COLUMN IF NOT EXISTS role_id INTEGER;

-- ✅ 올바른 예
ALTER TABLE staff ADD COLUMN role_id INTEGER;
```

#### 2. TypeScript 타입 오류
```typescript
// ❌ 잘못된 예
const handleInputChange = (field: string, value: string | number) => {
  // undefined를 받을 수 없음
}

// ✅ 올바른 예
const handleInputChange = (field: string, value: string | number | undefined) => {
  // undefined도 처리 가능
}
```

#### 3. 마이그레이션 실패
- 기존 데이터베이스 백업 후 삭제
- 컬럼 중복 생성 에러 처리
- 트랜잭션 단위로 안전하게 실행

#### 4. 컴포넌트 렌더링 오류
- 기존 Member 컴포넌트 구조 정확히 참조
- 상태 관리 패턴 일관성 유지
- 에러 경계 적절히 설정

### 🔧 디버깅 명령어

```bash
# 타입 체크
npm run type-check

# 린트 검사
npm run lint

# 전체 진단
npm run doctor

# 개발 서버 실행
npm run dev
```

### 📞 추가 도움이 필요할 때

문제가 지속되면 다음 정보와 함께 질문하세요:
1. 정확한 에러 메시지
2. 실행한 명령어
3. 수정하려던 파일
4. 예상한 동작과 실제 동작

---

## 📝 사용법

1. 위 프롬프트를 순서대로 복사해서 사용
2. 각 단계 완료 후 검증하고 다음 단계 진행
3. 문제 발생시 체크리스트와 해결 가이드 참조
4. 필요시 프롬프트를 프로젝트에 맞게 조정

**성공적인 구현을 위해 단계를 건너뛰지 마세요!** 🎯 